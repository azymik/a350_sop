<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>A350 SOP Practice</title>
        <style>
            :root {
                --primary-color: #00264d; /* Airbus Blue-ish */
                --accent-color: #0099cc;
                --bg-color: #f4f4f9;
                --text-color: #333;
                --card-bg: #fff;
                --pf-color: #e74c3c;
                --pm-color: #27ae60;
                --cm1-color: #8e44ad;
                --cm2-color: #d35400;
            }

            body {
                font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
                margin: 0;
                padding: 0;
                background-color: var(--bg-color);
                color: var(--text-color);
            }

            /* Header & Navigation */
            header {
                background-color: var(--primary-color);
                color: white;
                padding: 1rem 2rem;
                position: sticky;
                top: 0;
                z-index: 1000;
                box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            }

            h1 {
                margin: 0;
                font-size: 1.5rem;
            }

            .role-selector {
                display: flex;
                gap: 10px;
                margin-top: 10px;
                justify-content: center;
                flex-wrap: wrap;
            }

            .role-btn {
                background: rgba(255, 255, 255, 0.1);
                border: 1px solid rgba(255, 255, 255, 0.3);
                color: white;
                padding: 8px 16px;
                cursor: pointer;
                border-radius: 4px;
                font-weight: bold;
                transition: all 0.3s ease;
            }

            .role-btn:hover {
                background: rgba(255, 255, 255, 0.2);
            }

            .role-btn.active {
                background: white;
                color: var(--primary-color);
                border-color: white;
                transform: scale(1.05);
            }

            /* Content Area */
            main {
                max-width: 800px;
                margin: 2rem auto;
                padding: 0 1rem;
            }

            .section {
                background: var(--card-bg);
                border-radius: 8px;
                box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
                margin-bottom: 2rem;
                overflow: hidden;
            }

            .section-header {
                background-color: #e9ecef;
                padding: 1rem;
                font-size: 1.2rem;
                font-weight: bold;
                border-left: 5px solid var(--accent-color);
                display: flex;
                justify-content: space-between;
                align-items: center;
            }

            .item-group {
                border-bottom: 1px solid #eee;
            }

            .item-group:last-child {
                border-bottom: none;
            }

            .item {
                padding: 1rem;
                display: flex;
                flex-direction: column;
                transition: background 0.2s;
            }

            .item:hover {
                background-color: #fcfcfc;
            }

            .item-role-badge {
                font-size: 0.7rem;
                text-transform: uppercase;
                padding: 2px 6px;
                border-radius: 3px;
                align-self: flex-start;
                font-weight: bold;
                color: white;
                margin-bottom: 0;
                flex-shrink: 0; /* Prevents badge from squishing */
            }

            /* Role Badge Colors */
            .role-PF {
                background-color: var(--pf-color);
            }
            .role-PM {
                background-color: var(--pm-color);
            }
            .role-CM1 {
                background-color: var(--cm1-color);
            }
            .role-CM2 {
                background-color: var(--cm2-color);
            }
            .role-BOTH,
            .role-ALL,
            .role-CM1-CM2,
            .role-PF-PM {
                background-color: #7f8c8d;
            }

            .action-title {
                font-weight: 700;
                font-size: 1rem;
                flex-grow: 1; /* Forces the title to fill the middle space */
                margin: 0;
            }

            .action-detail {
                font-size: 0.9rem;
                color: #555;
                line-height: 1.5;
                white-space: pre-wrap; /* Keeps formatting */
            }

            .sub-action {
                margin-left: 20px;
                margin-top: 5px;
                padding-left: 10px;
                border-left: 2px solid #ddd;
            }

            /* Filtering Logic (Hidden by default) */
            .hidden {
                display: none !important;
            }

            .empty-section-message {
                padding: 1rem;
                color: #999;
                font-style: italic;
                text-align: center;
                display: none;
            }
            /* Collapsible container styles */
            .action-detail-container {
                max-height: 0;
                overflow: hidden;
                transition: max-height 0.3s ease-out;
                background-color: #f9f9f9;
                border-radius: 4px;
                margin-top: 5px;
            }

            /* Expanded state */
            .item.expanded .action-detail-container {
                max-height: 1000px; /* Large enough to fit content */
                transition: max-height 0.5s ease-in;
                border-left: 3px solid #ddd;
            }

            .action-detail {
                padding: 10px;
                font-size: 0.9rem;
                color: #555;
                white-space: pre-wrap;
            }

            .action-header {
                display: flex;
                align-items: center; /* Vertically centers everything */
                gap: 10px; /* Space between badge, title, and button */
                width: 100%;
            }

            /* The arrow button */
            .toggle-btn {
                background: none;
                border: none;
                cursor: pointer;
                font-size: 0.8rem;
                padding: 5px 10px;
                color: #999;
                transition: transform 0.3s ease;
                flex-shrink: 0; /* Prevents button from squishing */
            }

            .toggle-btn:hover {
                color: var(--accent-color);
                background-color: rgba(0, 0, 0, 0.05);
                border-radius: 4px;
            }

            /* Rotate arrow when expanded */
            .item.expanded .toggle-btn {
                transform: rotate(180deg);
                color: var(--accent-color);
            }

            /* Master button specific style */
            .master-btn {
                background-color: var(--accent-color) !important;
                border-color: var(--accent-color) !important;
                margin-left: 15px;
            }
        </style>
    </head>
    <body>
        <header>
            <div style="text-align: center">
                <h1>A350 SOP Practice</h1>
                <p style="font-size: 0.9rem; margin: 5px 0 0; opacity: 0.8">
                    Select your role to filter the checklist
                </p>
            </div>
            <div class="role-selector" id="roleSelector">
                <button
                    class="role-btn active"
                    onclick="toggleRole('ALL')"
                    data-role="ALL"
                >
                    SHOW ALL
                </button>
                <button
                    class="role-btn"
                    onclick="toggleRole('CM1')"
                    data-role="CM1"
                >
                    CM1
                </button>
                <button
                    class="role-btn"
                    onclick="toggleRole('CM2')"
                    data-role="CM2"
                >
                    CM2
                </button>
                <button
                    class="role-btn"
                    onclick="toggleRole('PF')"
                    data-role="PF"
                >
                    PF
                </button>
                <button
                    class="role-btn"
                    onclick="toggleRole('PM')"
                    data-role="PM"
                >
                    PM
                </button>
                <button
                    id="masterBtn"
                    class="role-btn master-btn"
                    onclick="toggleAllDetails()"
                >
                    EXPAND ALL DETAILS
                </button>
            </div>
        </header>

        <main id="checklist-container"></main>

        <script>
            // Data Structure extracted from Markdown
            const sopData = [
                {
                    title: "Safety Exterior Inspection",
                    items: [
                        {
                            role: "CM2",
                            action: "WHEEL CHOCKS - CHECK",
                            detail: "If the wheel chocks are not in position, the flight crew must check that the parking brake is set with sufficient accumulator pressure.",
                        },
                        {
                            role: "CM2",
                            action: "L/G DOORS - CHECK POSITION",
                            detail: "If any landing gear door is open, do not pressurize the hydraulic systems until clearance is obtained from ground personnel.",
                        },
                        {
                            role: "CM2",
                            action: "APU AREA - CHECK",
                            detail: "Check that the APU exhaust is free of obstruction.",
                        },
                    ],
                },
                {
                    title: "Cockpit Preflight Security Check",
                    items: [
                        {
                            role: "CM2",
                            action: "COCKPIT FLOOR - CHECK",
                            detail: "",
                        },
                        {
                            role: "CM2",
                            action: "CREW SEATS BACKSIDE POCKETS - CHECK",
                            detail: "",
                        },
                        {
                            role: "CM2",
                            action: "BRIEFCASE / QRH / PERSONAL STOWAGES - CHECK",
                            detail: "",
                        },
                        {
                            role: "CM2",
                            action: "LAPTOP / BOTTLE STOWAGES - CHECK",
                            detail: "",
                        },
                        {
                            role: "CM2",
                            action: "OXYGEN MASK AND BOOMSET STOWAGES - CHECK",
                            detail: "",
                        },
                        {
                            role: "CM2",
                            action: "EMERGENCY EQUIPMENT STOWAGES - CHECK",
                            detail: "",
                        },
                        {
                            role: "CM2",
                            action: "COAT STOWAGE - CHECK",
                            detail: "",
                        },
                        {
                            role: "CM2",
                            action: "COCKPIT SUITCASE LOCKED/SEALED - CHECK",
                            detail: "",
                        },
                        {
                            role: "CM2",
                            action: "LANDING GEAR LEVER COVER - CHECK",
                            detail: "",
                        },
                        {
                            role: "CM2",
                            action: "OCCUPANT SEATS - CHECK",
                            detail: "",
                        },
                        {
                            role: "CM2",
                            action: "CERTIFICATES/ONBOARD DOCUMENTS - CHECK",
                            detail: "",
                        },
                    ],
                },
                {
                    title: "Preliminary Cockpit Preparation",
                    items: [
                        {
                            role: "BOTH",
                            action: "AIRCRAFT SETUP",
                            isHeader: true,
                        },
                        {
                            role: "CM2",
                            action: "ENG 1, 2 MASTER LEVERS - OFF",
                            detail: "",
                        },
                        {
                            role: "CM2",
                            action: "ENG START selector - NORM",
                            detail: "",
                        },
                        { role: "CM2", action: "L/G lever - DOWN", detail: "" },
                        {
                            role: "CM2",
                            action: "Both WIPER selectors - OFF",
                            detail: "",
                        },

                        {
                            role: "BOTH",
                            action: "BATTERIES CHECK/EXTERNAL POWER",
                            isHeader: true,
                        },
                        {
                            role: "CM2",
                            action: "ALL BAT pb-sw (BAT 2, BAT EMER 2, BAT EMER 1, BAT 1) - OFF",
                            detail: "Switch off the batteries in this specific order: BAT 2, BAT EMER 2, BAT EMER 1, BAT 1. This prevents the display of spurious dispatch messages.",
                        },
                        {
                            role: "CM2",
                            action: "ALL BAT - CHECK ABOVE 25 V",
                            detail: "Check the battery voltage on the overhead panel.",
                        },
                        {
                            role: "CM2",
                            action: "ALL BAT pb-sw (BAT 1, BAT EMER 1, BAT EMER 2, BAT 2) - ON",
                            detail: "The crew must ensure that the voltage of all batteries is above 25 V before takeoff.\nSwitch on the batteries in this specific order: BAT 1, BAT EMER 1, BAT EMER 2, BAT 2. This prevents the display of spurious dispatch messages.\nIf a battery voltage is at or below 25 V, perform a charging cycle of the batteries with the external power or the APU. A charging cycle lasts in average around 45 min. The flight crew can verify on the ELEC DC SD page, that the batteries charge with both indications:\n- The current is between 0 A and 4 A\n- A green arrow is displayed between the DC busbar and the battery indications.",
                        },
                        {
                            role: "CM2",
                            action: "When the AVAIL light is on:",
                            detail: "",
                        },
                        {
                            role: "CM2",
                            action: "> EXT 1(2) pb - AUTO",
                            detail: "In order to avoid electrical reconfigurations:\n- When only one electrical power is available, connect EXT PWR 2\n- When two electrical powers are available, connect EXT PWR 2 before EXT PWR 1.\nTo avoid the display of spurious dispatch messages, the GND SVCE sw 1 on the door 1L must be set to OFF before setting the EXT 1(2) pb to the AUTO position.",
                        },
                        { role: "BOTH", action: "ELM", isHeader: true },
                        {
                            role: "CM2",
                            action: "ELM pb-sw - CHECK OFF",
                            detail: "On the ELEC panel, ensure that the ELM pb-sw is set to OFF in order to avoid load shedding during ground operations.",
                        },
                        { role: "BOTH", action: "ADIRS", isHeader: true },
                        {
                            role: "CM2",
                            action: "All IR MODE selectors - OFF then NAV",
                            detail: "Perform a complete alignment, if one of the following applies:\n- This is the first flight of the day\n- There was a change in flight crew\n- The GPS is not available, and if the flight crew expects long segments in airspaces with poor radio NAVAIDS coverage\n- RNP AR operations are expected\nFor other flights, perform a fast alignment.\nFor more information on the IR alignment, Refer to IR alignment",
                        },

                        {
                            role: "BOTH",
                            action: "COCKPIT LIGHTS",
                            isHeader: true,
                        },
                        {
                            role: "CM1-CM2",
                            action: "COCKPIT LIGHTS - AS RQRD",
                            detail: "On the overhead panel, set the STBY COMPASS sw as required, and set to BRT or DIM the ANN LT sw as required.\nOn the glareshield, set the glareshield integral lights knob, as required.\nOn the pedestal, set the FLOOD LT knob, the DOME LT knob and INTEG LT knob, as required.\nOn the pedestal, set the DU MASTER BRT knob, as required.\nOn each Display Unit, adjust the brightness and contrast, as required.",
                        },
                        {
                            role: "BOTH",
                            action: "EFB/FMS INITIALIZATION",
                            isHeader: true,
                        },
                        {
                            role: "CM1-CM2",
                            action: "ALL EFBs - START",
                            detail: "",
                        },
                        {
                            role: "CM1",
                            action: "On FMS ACTIVE/INT page: FLT NBR - INSERT/CHECK",
                            detail: "Insert FLT NBR only if the company flight plan is not received via ACARS. For ATC needs, the crew should enter exactly the entire flight number, as shown on the ICAO flight plan, without inserting any space.",
                        },
                        {
                            role: "CM1",
                            action: "On FMS DATA/STATUS page: ACFT STATUS - CHECK",
                            detail: "Check:\n- The engine and aircraft types\n- The active database validity period\n- The pilot stored elements: Check if any waypoint, NAVAID, route, and runway appear. Review and delete them, if appropriate.\n- The PERF and IDLE factors.: To modify the PERF and IDLE factors, Refer to DSC-22-FMS-20-20-20 MODIFY Button",
                        },
                        {
                            role: "CM1",
                            action: "On FMS ACTIVE/INT page: FROM/TO - INSERT/CHECK",
                            detail: "Insert FROM/TO only if the company flight plan is not received via ACARS.",
                        },
                        {
                            role: "CM1-CM2",
                            action: "EFB Version and Database - CHECK",
                            detail: "On the FLT OPS STS page, check the EFB version number and compare it with valid version number given in the CrewBulletin.",
                        },
                        {
                            role: "CM1",
                            action: "EFB/AVIONICS - SYNCHRONIZE",
                            detail: "Synchronize the EFB with the avionics to retrieve initialization information.",
                        },
                        {
                            role: "CM1-CM2",
                            action: "EFB INITIALIZATION - CHECK",
                            detail: "Check the EFB initialization:\n- ACFT TYPE and ACFT REG\n- FLT NBR and FROM/TO in agreement with the FMS ACTIVE/INIT page.\nIf the synchronization with the avionics is not available, the flight crew must manually enter in the EFB the above mentioned data.",
                        },
                        {
                            role: "CM1",
                            action: "AVNCS COMPANY COM - SELECT",
                            detail: "Click on the PRE-FLIGHT",
                        },
                        {
                            role: "CM1-CM2",
                            action: "On the INIT DATA page - CHECK and INSERT",
                            detail: "On the INIT DATA page:\n- Check the DEPT/DEST\n- Insert ETD as shown on the flight plan\n- Check and insert SCHEDULE DATE as shown on the flight plan",
                        },
                        {
                            role: "CM1",
                            action: "SEND button - CLICK",
                            detail: "",
                        },
                        { role: "BOTH", action: "ANF", isHeader: true },
                        {
                            role: "CM1",
                            action: "ANF DATABASE - CHECK",
                            detail: "- Set the ND range selector to ZOOM to activate the ANF, then\n- Select the STATUS tab and check that the active database is valid.",
                        },
                        {
                            role: "BOTH",
                            action: "AIRCRAFT ACCEPTANCE",
                            isHeader: true,
                        },
                        {
                            role: "CM1",
                            action: "RCL ALL pb - PRESS 3 s",
                            detail: "Press the RCL ALL pb for at least 3 s to recall all alerts that were cleared or canceled.",
                        },
                        {
                            role: "CM1",
                            action: "DISPCH pb - PRESS",
                            detail: "Press the DISPCH pb to consult all active dispatch messages. The dispatch message NAV RNP AR CAPABILITY DOWNGRADED may be displayed if the F-PLN is not yet entered in the FMS. If the above dispatch message is still displayed after the entry of the F-PLN in the FMS, the flight crew must take it into account for the aircraft acceptance.",
                        },
                        {
                            role: "BOTH",
                            action: "ELB/LOGBOOK AND MEL/CDL ITEMS - CHECK",
                            detail: "- Check the deferred items list\n- Crosscheck with active dispatch messages.\n\nAll flight crewmembers:\n- Check and discuss the technical condition of the aircraft (deferred items list)\n- Check and discuss the MEL items (including the associated operational procedures, if any) and the CDL items. This includes the acceptability of the MEL and CDL items and the influence on the flight plan\n- Confirming the information of Notice to Crew\n- In FZFG conditions with OAT at + 1 °C (34 °F) or below, the flight crew must refer to the operations in FZFG (Refer to PRO-NOR-SUP-SUP-ADVWXR Engine Operation on Ground in FZFG).",
                        },
                        {
                            role: "BOTH",
                            action: "AIRCRAFT CONFIGURATION SUMMARY - CHECK",
                            detail: "For awareness of the current aircraft configuration, both flight crewmembers discuss together the optional installed aircraft systems and functions, and their influence on the ongoing flight.\nRefer to GEN Aircraft Configuration Summary.",
                        },
                        {
                            role: "BOTH",
                            action: "OEB - CHECK",
                            detail: "All flight crewmembers review and discuss together all OEBs and associated procedures applicable to the aircraft.\nAny flight crewmember who operates at the flight deck at any time during the on-going flight should be aware of the applicable OEB(s).",
                        },
                        {
                            role: "CM1",
                            action: "AIRCRAFT ACCEPTANCE - PERFORM",
                            detail: "The aircraft acceptance can be performed later, but must be completed at the end of the Cockpit Preparation.",
                        },
                        {
                            role: "BOTH",
                            action: "FIRE TEST/APU START",
                            isHeader: true,
                        },
                        {
                            role: "CM2",
                            action: "RMP 1 and 2 - CHECK ON",
                            detail: "",
                        },
                        {
                            role: "CM2",
                            action: "STBY NAV - CHECK OFF | STBY RAD NAV key - OFF",
                            detail: "",
                        },
                        {
                            role: "CM2",
                            action: "COMMUNICATION FREQUENCIES - TUNE",
                            detail: "",
                        },
                        {
                            role: "CM1-CM2",
                            action: "INT RECEPTION knob - RELEASE/ADJUST",
                            detail: "Press and release the INT RECEPTION knob to the out position.\nTurn the INT RECEPTION knob to adjust the volume and to enable contact with the ground crew.",
                        },
                        {
                            role: "CM2",
                            action: "APU FIRE pb-sw - CHECK IN and GUARDED",
                            detail: "",
                        },
                        {
                            role: "CM2",
                            action: "APU AGENT light - OFF",
                            detail: "",
                        },
                        {
                            role: "CM2",
                            action: "ALL ENG FIRE pb-sw - CHECK IN and GUARDED",
                            detail: "",
                        },
                        {
                            role: "CM2",
                            action: "ALL ENG AGENT 1 and 2 lights - OFF",
                            detail: "",
                        },
                        {
                            role: "CM2",
                            action: "FIRE TEST pb - PRESS",
                            detail: "The flight crew should maintain the TEST pb pressed during the time of the test.\nTEST RESULT\nCheck that the engines, APU and main landing gear bay fire detection and extinguishing systems are operative:\n- The continuous repetitive chime sounds\n- All ENG FIRE pb-sw and the APU FIRE pb-sw come on red\n- All SQUIB lights of the ENG and APU AGENT pb come on\n- All DISCH lights of the ENG and APU AGENT pb come on\n- The FIRE light of the MLG BAY light comes on red\n- The MASTER WARN lights flash\n- The ECAM displays the ENG 1 FIRE, ENG 2 FIRE, APU FIRE, MLG BAY FIRE alerts\n- All FIRE lights on the ENG MASTER panel come on.",
                        },
                        {
                            role: "CM2",
                            action: "APU MASTER SW pb-sw - ON",
                            detail: "",
                        },
                        {
                            role: "CM2",
                            action: "APU START pb - ON",
                            detail: "If the APU start failed, Refer to APU Abnormal Operations.",
                        },
                        {
                            role: "CM2",
                            action: "When the APU is AVAIL",
                            detail: "",
                        },
                        {
                            role: "CM2",
                            action: "> APU BLEED pb-sw - ON",
                            detail: "Do not use APU bleed if the ground crew confirms that an air start unit or air conditioning unit is connected to the aircraft.\nTo determine if an air start unit is connected, the flight crew should check on the BLEED SD page, if there is pressure in the bleed air system.",
                        },
                        {
                            role: "CM2",
                            action: "> XBLEED selector - AUTO",
                            detail: "",
                        },
                        {
                            role: "CM2",
                            action: "> AIR FLOW selector - NORM",
                            detail: "As long as the number of passenger is not entered in the FMS, airflow is automatically adjusted to the maximum number of passengers.\nAs soon as the number of passengers is entered, during FMS initialization, airflow is automatically adjusted to the actual number of passengers.",
                        },
                        {
                            role: "CM2",
                            action: "> COCKPIT selector - AS RQRD",
                            detail: "",
                        },
                        {
                            role: "CM2",
                            action: "> CABIN selector - PURS SEL",
                            detail: "",
                        },
                        {
                            role: "CM2",
                            action: "> EXT pb - AS RQRD",
                            detail: "When the APU GEN is ON, the EXT PWR 1 does not supply the electrical network.",
                        },
                        {
                            role: "CM2",
                            action: "> If EXT PWR 1 was used before APU start:",
                            detail: "",
                        },
                        {
                            role: "CM2",
                            action: ">> EXT 1 pb - PRESS",
                            detail: "Note: the AVAIL light comes on.\nThe flight crew may keep EXT PWR 2 to reduce the APU load, particularly in hot weather conditions.",
                        },
                        {
                            role: "CM2",
                            action: "If APU start on BAT:",
                            detail: "The following spurious dispatch messages may be displayed on the DISPATCH page:\n- ELEC RAT SHEDDING REDUNDANCY,\n- COND VENT LOCAL CTL REDUNDANCY.\nContact maintenance to clear the spurious dispatch messages, or apply MEL:\n- For ELEC RAT SHEDDING REDUNDANCY: Refer to MEL/ME-DM-ELEC ELEC RAT SHEDDING REDUNDANCY,\n- For COND VENT LOCAL CTL REDUNDANCY: Referto MEL/ME-DM-COND COND VENT LOCAL CTL REDUNDANCY.",
                        },
                        {
                            role: "BOTH",
                            action: "PRELIMINARY PERFORMANCE DETERMINATION",
                            isHeader: true,
                        },
                        {
                            role: "CM1-CM2",
                            action: "AIRFIELD DATA - OBTAIN",
                            detail: "",
                        },
                        {
                            role: "CM1-CM2",
                            action: "If dispatch under MEL or CDL and in accordance with the logbook:",
                            detail: "",
                        },
                        {
                            role: "CM1-CM2",
                            action: "> MEL/CDL ITEMS - CHECK",
                            detail: "Check that the EFB takes into account the MEL and CDL items.",
                        },
                        {
                            role: "BOTH",
                            action: "NAVIGATION CHARTS - PREPARE",
                            detail: "Prepare the necessary charts and verify that both flight crewmembers refer to the same chart reference.",
                        },
                        {
                            role: "CM1-CM2",
                            action: "PRELIM T.O PERF DATA - COMPUTE",
                            detail: "Both flight crewmembers discuss together and decide all of the following:\n- RWY to be used\n- RWY intersection\n- Flaps setting\n- Use of anti-ice\n- Use of packs\n- Takeoff thrust setting options (FLEX, TOGA, DERATE).\nBoth flight crewmembers independently compute the preliminary takeoff performance data.",
                        },
                        {
                            role: "BOTH",
                            action: "PRELIM T.O PERF DATA - CROSSCHECK",
                            detail: "Both flight crewmembers compare their EFB to ensure that the computations are the same.",
                        },
                        {
                            role: "BOTH",
                            action: "BEFORE WALKAROUND (PF/PM)",
                            isHeader: true,
                        },
                        {
                            role: "PM",
                            action: "On the DOOR SD page:",
                            detail: "",
                        },
                        {
                            role: "PM",
                            action: "> RAIN RPLNT LEVEL INDICATION - CHECK NORM",
                            detail: "Rain repellent must not be used as a windshield washer, and never be applied on a dry windshield.",
                        },
                        {
                            role: "PM",
                            action: "> CAPT and F/O OXYGEN PRESSURE - CHECK",
                            detail: "Check that the oxygen pressure is above the minimum necessary to fly the scheduled flight.\nRefer to LIM-OXY Minimum Flight Crew Oxygen Pressure",
                        },
                        {
                            role: "PM",
                            action: "On the HYD SD page: RESERVOIR FLUID LEVEL - CHECK WITHIN NORMAL RANGE",
                            detail: "",
                        },
                        {
                            role: "PM",
                            action: "On the ENG SD page: ENG OIL QUANTITY - CHECK NORMAL",
                            detail: "350-900\nIf the ENG oil quantity indication does not appear on the ENG SD page, press the ENG 1 and 2 FADEC GND PWR pb-sw on the overhead maintenance panel. Wait for 10 s to prevent the display of the spurious ENG 1(2) SHORT TERM MINOR FAULT dispatch message. After the check of the ENG oil quantity, press again the ENG 1 and 2 FADEC GND PWR pb-sw.\n\n350-1000\nIf the ENG oil quantity indication does not appear on the ENG SD page, press the ENG 1 and 2 FADEC GND PWR pb-sw on the overhead maintenance panel. After the check of the ENG oil quantity, press again the ENG 1 and 2 FADEC GND PWR pb-sw.\n\ncommon\nCheck that the oil quantity is above the minimum. Refer to Engines Oil Limitations.",
                        },
                        {
                            role: "PM",
                            action: "FLAPS - CHECK POSITION",
                            detail: "Check that the slats/flaps position on the lower part of the PFD agrees with the FLAPS lever position.",
                        },
                        {
                            role: "PM",
                            action: "SPEED BRAKE lever - CHECK RETRACTED/DISARMED",
                            detail: "If flight control surface positions do not agree with the control handle positions, check with the maintenance crew before applying hydraulic power.",
                        },
                        {
                            role: "PM",
                            action: "ACCU PRESS - CHECK",
                            detail: "The GREEN and YELLOW ACCU pressure indications must be in the green band.",
                        },
                        {
                            role: "PM",
                            action: "If the GREEN pressure indication is not in the green band:",
                            detail: "",
                        },
                        {
                            role: "PM",
                            action: "> If APU GEN is ON or two external power units are connected:",
                            detail: "ACCU REINFLATE pb - PRESS",
                        },
                        {
                            role: "PM",
                            action: "> If APU GEN is OFF and only one external power unit is connected:",
                            detail: "YELLOW ELEC PMP pb-sw - PRESS (the white OFF light comes on)\n\nACCU REINFLATE pb - PRESS\n\nYELLOW ELEC PMP pb-sw - PRESS (the white OFF light goes off)",
                        },
                        {
                            role: "PM",
                            action: "If the YELLOW pressure indication is not in the green band:",
                            detail: "",
                        },
                        {
                            role: "PM",
                            action: "> If APU GEN is ON or two external power units are connected:",
                            detail: "ACCU REINFLATE pb - PRESS",
                        },
                        {
                            role: "PM",
                            action: "> If APU GEN is OFF and only one external power unit is connected:",
                            detail: "GREEN ELEC PMP pb-sw - PRESS (the white OFF light comes on)\n\nACCU REINFLATE pb - PRESS\n\nGREEN ELEC PMP pb-sw - PRESS (the white OFF light goes off)",
                        },
                        {
                            role: "PM",
                            action: "PARK BRK handle - ON",
                            detail: "Set to ON the PARK BRK handle during the exterior inspection, in order to check the brake wear indicators.",
                        },
                        {
                            role: "PM",
                            action: "PARK BRK indication - CHECK DISPLAYED",
                            detail: "When the parking brake is set to ON and the pressure is effective on brakes, the slats/flaps display shows the PARK BRK indication.",
                        },
                        {
                            role: "PM",
                            action: "EMER EQPT - CHECK",
                            detail: "Check that:\n- Life vests are stowed\n- Crash axe or crow bar is stowed\n- Protective Breathing Equipment (PBE) is stowed and ready for use\n- Portable fire extinguisher is lockwired and the pressure gauge indicator is in the green area\n- Oxygen masks are stowed\n- Flashlights are stowed.",
                        },
                        {
                            role: "PM",
                            action: "GEAR PINS - CHECK ONBOARD/STOWED",
                            detail: "Check that the five gear pins are on board and stowed.",
                        },
                        {
                            role: "PM",
                            action: "FAN COWL DOORS (FCD) KEYS - CHECK ONBOARD/STOWED",
                            detail: "58501, 58502\nCheck that the two FCD keys are on board and stowed.\n\n!= 58501, 58502\nCheck that the four FCD keys are on board and stowed.",
                        },
                        {
                            role: "PM",
                            action: "EXTERIOR WALKAROUND - PERFORM",
                            detail: "",
                        },
                    ],
                },
                {
                    title: "Cockpit Preparation",
                    items: [
                        {
                            role: "BOTH",
                            action: "OVERHEAD PANEL",
                            isHeader: true,
                        },
                        {
                            role: "PF",
                            action: "As a general rule, during the scan sequence: All white light (except MAINTENANCE panel) - OFF",
                            detail: "During the scan of the overhead panel, check also that the only amber lights are the GEN FAULT lights.",
                        },
                        {
                            role: "PF",
                            action: "CAPT/CAPT & PURS sw - CAPT",
                            detail: "",
                        },
                        {
                            role: "PF",
                            action: "RCDR GND CTL pb - ON",
                            detail: "",
                        },
                        {
                            role: "PF",
                            action: "ELT - ARMED",
                            detail: "",
                        },
                        {
                            role: "PF",
                            action: "CKPT EQPT POWER SUPPLY buttons (left side) - CHECK",
                            detail: "Check that all power supply buttons are pushed.",
                        },
                        {
                            role: "PF",
                            action: "RESET buttons (left side) - CHECK",
                            detail: "Check that all reset buttons are pushed.",
                        },
                        {
                            role: "PF",
                            action: "STROBE sw - AUTO",
                            detail: "",
                        },
                        {
                            role: "PF",
                            action: "BEACON sw - OFF",
                            detail: "",
                        },
                        {
                            role: "PF",
                            action: "NAV sw - AS RQRD",
                            detail: "Set to NAV 1 the NAV sw, as required, to turn on the navigation lights (NAV LT 2 is used only when NAV LT 1 fails).",
                        },
                        {
                            role: "PF",
                            action: "REMAINING EXTERIOR LIGHTS - AS RQRD",
                            detail: "",
                        },
                        {
                            role: "PF",
                            action: "SIGNS panel - SET",
                            detail: "- Set the SEAT BELTS sw to ON when refueling is complete. For more information, Refer to PRO-NOR-SUP-SUP-FUEL Fueling with Passengers Embarking, On Board, or Disembarking\n- Set the EMER EXIT LT sw to ARM\n- Set the other switches, as required.",
                        },
                        {
                            role: "PF",
                            action: "PROBE & WINDOW HEAT pb-sw - AUTO",
                            detail: "",
                        },
                        {
                            role: "PF",
                            action: "XBLEED selector - AUTO",
                            detail: "",
                        },
                        {
                            role: "PF",
                            action: "AIR FLOW selector - NORM",
                            detail: "As long as the number of passenger is not entered in the FMS, airflow is automatically adjusted to the maximum number of passengers.\nAs soon as the number of passengers is entered, during FMS initialization, airflow is automatically adjusted to the actual number of passengers.",
                        },
                        {
                            role: "PF",
                            action: "COCKPIT selector - AS RQRD",
                            detail: "",
                        },
                        {
                            role: "PF",
                            action: "CABIN selector - PURS SEL",
                            detail: "",
                        },
                        {
                            role: "PF",
                            action: "MAINTENANCE panel - CHECK",
                            detail: "Check the MAINTENANCE according to current maintenance operations on the aircraft: some lights may be kept ON during the cockpit preparation, for example:\n- ON light on GND CONNECTION pb-sw, or\n- ON light on REMOTE C/B CTL pb-sw.\n\nAt the latest, check that all lights on the MAINTENANCE panel are OFF before initiating the Cockpit Preparation checklist.",
                        },
                        {
                            role: "PF",
                            action: "CARGO AIR COND panel - AS RQRD",
                            detail: "",
                        },
                        {
                            role: "PF",
                            action: "CVR TEST pb - PRESS",
                            detail: "Press and release the CVR TEST pb. Check the absence of the DISPATCH PAGE UPDATE ECAM alert.",
                        },
                        {
                            role: "PF",
                            action: "CKPT EQPT POWER SUPPLY buttons (right side) - CHECK",
                            detail: "Check that all power supply buttons are pushed.",
                        },
                        {
                            role: "PF",
                            action: "RESET buttons (right side) - CHECK",
                            detail: "Check that all reset buttons are pushed.",
                        },
                        {
                            role: "BOTH",
                            action: "CTR INSTRUMENT PANEL",
                            isHeader: true,
                        },
                        {
                            role: "PF",
                            action: "AIR DATA selector - AUTO",
                            detail: "",
                        },
                        {
                            role: "PF",
                            action: "FMS selector - NORM",
                            detail: "",
                        },
                        {
                            role: "PF",
                            action: "ISIS - CHECK",
                            detail: "- Adjust the brightness, as appropriate\n- Check:\n  - The airspeed\n  - The barometric setting\n  - The altitude indication\n  - The attitude indications\n  - The heading.",
                        },
                        {
                            role: "PF",
                            action: "ANTI SKID sw - ON",
                            detail: "",
                        },
                        {
                            role: "BOTH",
                            action: "PEDESTRAL",
                            isHeader: true,
                        },
                        {
                            role: "PF",
                            action: "RMP 1 - CHECK ON/SET",
                            detail: "STBY NAV - CHECK OFF | STBY RAD NAV key - CHECK OFF",
                        },
                        {
                            role: "PF",
                            action: "ACCU PRESS - CHECK",
                            detail: "The GREEN and YELLOW ACCU pressure indications must be in the green band.",
                        },
                        {
                            role: "PF",
                            action: "If the GREEN pressure indication is not in the green band:",
                            detail: "",
                        },
                        {
                            role: "PF",
                            action: "> If APU GEN is ON or two external power units are connected:",
                            detail: "ACCU REINFLATE pb - PRESS",
                        },
                        {
                            role: "PF",
                            action: "> If APU GEN is OFF and only one external power unit is connected:",
                            detail: "YELLOW ELEC PMP pb-sw - PRESS (the white OFF light comes on)\n\nACCU REINFLATE pb - PRESS\n\nYELLOW ELEC PMP pb-sw - PRESS (the white OFF light goes off)",
                        },
                        {
                            role: "PF",
                            action: "If the YELLOW pressure indication is not in the green band:",
                            detail: "",
                        },
                        {
                            role: "PF",
                            action: "> If APU GEN is ON or two external power units are connected:",
                            detail: "ACCU REINFLATE pb - PRESS",
                        },
                        {
                            role: "PF",
                            action: "> If APU GEN is OFF and only one external power unit is connected:",
                            detail: "GREEN ELEC PMP pb-sw - PRESS (the white OFF light comes on)\n\nACCU REINFLATE pb - PRESS\n\nGREEN ELEC PMP pb-sw - PRESS (the white OFF light goes off)",
                        },
                        {
                            role: "PF",
                            action: "PARK BRK handle - ON",
                            detail: "",
                        },
                        {
                            role: "PF",
                            action: "PARK BRK indication - CHECK DISPLAYED",
                            detail: "When the parking brake is set to ON and the pressure is effective on brakes, the slats/flaps display shows the PARK BRK indication.",
                        },
                        {
                            role: "PF",
                            action: "If brakes are hot and chocks are in place: PARK BRK handle - OFF",
                            detail: "Release of the parking brake prevents the critical structures to be exposed to high temperatures during an extended time. However, depending on the operational conditions (e.g. slippery tarmac), the parking brake may remain applied.",
                        },
                        {
                            role: "PF",
                            action: "L/G GRVTY EXTN sw - OFF",
                            detail: "",
                        },
                        {
                            role: "PF",
                            action: "THRUST LEVERS - IDLE",
                            detail: "",
                        },
                        {
                            role: "PF",
                            action: "THRUST REVERSER LEVERS - STOWED",
                            detail: "",
                        },
                        {
                            role: "PF",
                            action: "ENG 1, 2 MASTER LEVERS - OFF",
                            detail: "",
                        },
                        {
                            role: "PF",
                            action: "ENG START selector - NORM",
                            detail: "",
                        },
                        {
                            role: "PF",
                            action: "CKPT DOOR sw - NORM",
                            detail: "",
                        },
                        {
                            role: "PF",
                            action: "RMP 2 - CHECK ON/SET",
                            detail: "STBY NAV - CHECK OFF | STBY RAD NAV key - CHECK OFF",
                        },
                        {
                            role: "PF",
                            action: "RMP 3 - CHECK ON/SET",
                            detail: "",
                        },
                        {
                            role: "BOTH",
                            action: "MFD ATC COM",
                            isHeader: true,
                        },
                        {
                            role: "PF",
                            action: "On the ATC COM/MSG RECORD/ALL MSG page: MSG RECORD - CHECK NO STORED MSG",
                            detail: "Check that NO STORED MSG appears on the MFD. If it is not the case, click on the ERASE ALL button in order to erase the record of all CPDLC messages of the previous flight. This avoids confusing CPDLC messages from the previous flight with the ones of the current flight.",
                        },
                        {
                            role: "PF",
                            action: "On the ATC COM/CONNECT page: If ADS-C services are expected: ADS-C - CHECK ARMED",
                            detail: "",
                        },
                        {
                            role: "BOTH",
                            action: "MFD SURV",
                            isHeader: true,
                        },
                        {
                            role: "PF",
                            action: "On the SURV/CONTROLS page: XPDR - STBY",
                            detail: "",
                        },
                        {
                            role: "BOTH",
                            action: "FMS PREPARATION",
                            isHeader: true,
                        },
                        {
                            role: "PF",
                            action: "FLIGHT PLAN INITIALIZATION - COMPLETE, AS RQRD",
                            detail: "Complete the FMS ACTIVE/INIT page, as required (in particular, the flight crew should SWAP ACTIVE UPLINKED CPNY F-PLN or insert the flight plan manually in case of uplink not available).\n\nNote: If FMS rejects F-PLN due to FMS buffer full, Refer to DSC-22-FMS-40 FMS Rejected F-PLN due to the FMS Buffer Full.",
                        },
                        {
                            role: "PF",
                            action: "CRZ TEMP - RE-ENTER / ADJUST AS RQRD",
                            detail: "The entry of accurate CRZ TEMP (at top of climb) enables FMS to correctly compute an accurate REC MÁX FL for top of climb. Use the forecasted cruise temperature from the computerized F-PLN.",
                        },
                        {
                            role: "PF",
                            action: "TROPO - CHECK",
                            detail: "Check and modity tropopause level to agree with forecasted value at top of climb from the computerized F-PLN.",
                        },
                        {
                            role: "PF",
                            action: "WINDS - ENTER AS APPROPRIATE",
                            detail: "Choose between the trip wind or the forecasted wind for climb, cruise, or descent, as appropriate.\nUse the average wind or forecasted wind from the computerized F-PLN.",
                        },
                        {
                            role: "PF",
                            action: "IRS ALIGNMENT",
                            detail: "If the GPS is available:\n> IRS 1, 2, and 3 - CHECK NAV or ALIGN\n> On the FMS POSITION/IRS page, check that the IRS are either aligned or in alignment.\n\nIf the GPS is not available, or is failed:\n> IRS 1, 2, and 3 - ALIGN ON OTHER REF\n> In the ALIGN ON OTHER REF menu, enter the gate coordinates of the departure airport.",
                        },
                        {
                            role: "PF",
                            action: "DEPARTURE - SELECT/CHECK",
                            detail: "Select the runway, SID and TRANS, as appropriate, in the FMS DEPARTURE page.\nIf the company route already has the departure procedure, check this departure.",
                        },
                        {
                            role: "PF",
                            action: "NAVAIDS - CHECK",
                            detail: "On the FMS POSITION/NAVAIDS page, check the VOR, ADF 5 and ILS tuned by the FMS.\nChange them, if required, and check that the ND and PFD (for the ILS) display the correct ident.",
                        },
                        {
                            role: "PF",
                            action: "NAVAIDS DESELECTION - AS RQRD",
                            detail: "Check the list of deselected navaids on the FMS POSITION/NAVAIDS page. If the NOTAMs warn that some navaids are not reliable, deselect them.",
                        },
                        {
                            role: "PF",
                            action: "FUEL AND LOAD //caution//",
                            detail: "Some of the characteristic speeds that are displayed on the PFD (green dot, F, S, VLS) are based on the ZFW and ZFWCG that the flight crew enters in the FMS.\nIn addition, when the first engine starts, the pitch trim is automatically set to the takeoff target, based on the entered ZFWCG and block fuel. It is therefore the Captain's responsibility to carefully check ZFW and ZFWCG.",
                        },
                        {
                            role: "PF",
                            action: "ZFW/ZFWCG - INSERT",
                            detail: "Enter the ZFWCG value to 30% and expect the ZFW value from operational flight plan (OFP).",
                        },
                        {
                            role: "PF",
                            action: "BLOCK FUEL - INSERT",
                            detail: "If refuel is not yet completed, the flight crew can enter the expected block fuel to enable FMS predictions.",
                        },
                        {
                            role: "PF",
                            action: "PAX NBR - KEEP BLANK/INSERT",
                            detail: "Insert PAX NBR if available or keep blank until loadsheet received then revise accordingly.",
                        },
                        {
                            role: "PF",
                            action: "TAXI/RTE RSV/ALTN/FINAL - CHECK/INSERT AS APPRORPIATE",
                            detail: "",
                        },
                        {
                            role: "PF",
                            action: "MIN FUEL AT DEST - CHECK/INSERT AS APPRORPIATE",
                            detail: "Check that the minimum fuel at destination is in accordance with the required minimum fuel.",
                        },
                        {
                            role: "PF",
                            action: "RWY - CHECK",
                            detail: "",
                        },
                        {
                            role: "PF",
                            action: "PRELIMINARY TAKEOFF PERF DATA - INSERT",
                            detail: "Insert the preliminary takeoff performance data on the T.O panel of the ACTIVE/PERF page.",
                        },
                        {
                            role: "PF",
                            action: "T.O SHIFT - INSERT AS RQRD",
                            detail: "If the aircraft takes off from an intersection, insert a T.O shift value in order to:\n- Increase awareness of the runway length reduction\n- Ensure accurate T.O surveillance monitoring before the engines are set to takeoff power.",
                        },
                        {
                            role: "PF",
                            action: "V1, VR and V2 - INSERT",
                            detail: "",
                        },
                        {
                            role: "PF",
                            action: "TOGA/FLEX/DERATED - SELECT/INSERT",
                            detail: "",
                        },
                        {
                            role: "PF",
                            action: "FLAPS - SELECT",
                            detail: "",
                        },
                        {
                            role: "PF",
                            action: "THS FOR _ - INSERT T.O CG (in %)",
                            detail: "Insert the THS setting FOR a takeoff CG of NN.N%. Use the TOCG indicated on the loadsheet as the reference for insertion of the T.O CG in the FMS.",
                        },
                        {
                            role: "PF",
                            action: "PACKS - INSERT",
                            detail: "",
                        },
                        {
                            role: "PF",
                            action: "ANTI-ICE - INSERT",
                            detail: "",
                        },
                        {
                            role: "PF",
                            action: "THR RED/ACCEL ALTITUDE - SET OR CHECK",
                            detail: "",
                        },
                        {
                            role: "PF",
                            action: "NOISE PROCEDURE - AS APPROPRIATE",
                            detail: "",
                        },
                        {
                            role: "PF",
                            action: "TRANS ALTITUDE - AS APPROPRIATE",
                            detail: "",
                        },
                        {
                            role: "PF",
                            action: "EO ACCEL ALTITUDE - SET OR CHECK",
                            detail: "",
                        },
                        {
                            role: "PF",
                            action: "THR - SELECT AS APPROPRIATE",
                            detail: "Select AUTO-DERATE or CLB on the CLB panel of the FMS ACTIVE/PERF page, as appropriate.",
                        },
                        {
                            role: "PF",
                            action: "On the CLB and CRZ panels of the FMS ACTIVE/PERF page: PRESEL SPEEDS - AS RQRD",
                            detail: "",
                        },
                        {
                            role: "PF",
                            action: "ACTIVE F-PLN - CHECK/COMPLETE",
                            detail: "Use the computerized flight plan as reference for routing and fuel predictions.\n- Check the EOSID on the ND PLAN mode, if applicable\n- Check the F-PLN and the ND PLAN mode vs. the computerized flight plan or the navigation charts (on the FMS ACTIVE/INIT page, the flight crew can access the route summary via the RTE SUMMARY button)\n- Check the distance to destination along the F-PLN. Compare it with the total distance computed by the computerized flight plan\n- Modify the active flight plan, as appropriate.\n\nNote: Two waypoints on the FMS using the same name but different lat/long (location) will be deleted by company flight plan uplink, then cause flight plan discontinuity. The flight crew should manually insert the waypoint by cross check OFP lat/long position data.",
                        },
                        {
                            role: "PF",
                            action: "SEC F-PLN //caution//",
                            detail: "The SEC 1(2)(3) flight plan data of the previous flight may not be automatically erased after landing.",
                        },
                        {
                            role: "PF",
                            action: "SEC F-PLAN(s) DATA - CHECK",
                            detail: "On the FMS SEC INDEX page, review the SEC 1(2)(3) F-PLN and delete remaining data from the previous flight it appropriate.\nThe associated SEC 1(2)(3) data from the previous flight can be erased via the DELETE button on the SEC 1(2) (3) panel of the SEC INDEX page.",
                        },
                        {
                            role: "PF",
                            action: "SEC F-PLN(s) - AS APPROPRIATE",
                            detail: "Create the SEC 1, SEC 2, and SEC 3 F-PLN, as appropriate, using the FMS SEC INDEX page.\nThe flight crew can use SEC 1 and SEC 2 to copy the active F-PLN, and to anticipate a runway change, an immediate return, or a diversion immediately after takeoff.\nFor an anticipated takeoff runway change, the flight crew must compute the takeoff performance accordingly.\nThe flight crew can load an AT flight plan in the SEC 3 only.",
                        },
                        {
                            role: "BOTH",
                            action: "FMS DATA CROSSCHECK",
                            isHeader: true,
                        },
                        {
                            role: "PM",
                            action: "FMS PREPARATION - CROSSCHECK",
                            detail: "After the PF prepared the FMS, the PM checks all the data entered in the FMS. This check includes a crosscheck of:\n- Waypoints of the expected departure route that include constraints\n- Waypoints of the flight plan vs. the computerized flight plan\n- Initial cruise altitude vs. the computerized flight plan\n- Total track miles vs. the computerized flight plan\n- Fuel remaining at destination vs. the computerized flight plan\n- Performance data displayed on the PM's EFB takeoff performance application with the T.O panel of the FMS ACTIVE/PERF page. This includes modifications of the THR RED/ACCEL/EO ACCEL settings, if applicable.\n- TRANS ALT in the T.O panel of the FMS ACTIVE/PERF page\n- Setup of the SEC flight plan.\n\nThe PM should have the same mental image of the intended departure procedure, trajectory, and constraints than the PF. The PM should check with the PF if anything is not clear.",
                        },
                        {
                            role: "BOTH",
                            action: "GLARESHIELD - When both flight crewmembers are seated",
                            isHeader: true,
                        },
                        {
                            role: "PF-PM",
                            action: "LOUDSPEAKER knob - SET",
                            detail: "Set the LOUDSPEAKER knob to approximately 1 o'clock position.",
                        },
                        {
                            role: "BOTH",
                            action: "BAROMETRIC REFERENCE - SET/CROSSCHECK",
                            detail: "Set the QNH on the EFIS CP and on the ISIS.\nCheck the barometric reference and altitude indications on the PFD and on ISIS.\nThe maximum difference is:\n- +/- 20 ft between both PFD\n- +/- 30 ft between ISIS and PFD.\n\nIf the difference of altitude indication between ISIS and PFD is greater than 30 ft, in rainy conditions:\n- Set the PROBE & WINDOW HEAT pb-sw to ON during two minutes, and\n- Check again the difference.\nBefore setting the PROBE & WINDOW HEAT pb-sw to ON, ensure that the protective covers are removed in order to prevent the covers from melting when the heater is used.",
                        },
                        {
                            role: "PF-PM",
                            action: "WX pb on EFIS CP - OFF",
                            detail: "Before pressing the WX pb on any EFIS CP, the flight crew should be sure that:\n- No maintenance personnel is facing the aircraft within a distance less that 5 m (16 ft) within an arc of 135 ° on either side of the aircraft centerline\n- The aircraft is not directed towards any large metallic obstacle, such as a hangar, within 5 m (16 ft) in an arc of 90 ° on either side of the aircraft centerline.\nThe weather radar starts to emit as soon as one engine is started and the flight crew presses the WX pb on the EFIS CP",
                        },
                        {
                            role: "PF-PM",
                            action: "TRAF pb - TRAF or ID (with ADS-B Traffic option)",
                            detail: "",
                        },
                        {
                            role: "PF-PM",
                            action: "OTHER EFIS OPTIONS - AS RQRD",
                            detail: "Select other EFIS options (e.g. constraints, waypoints, navaids, etc.) as required.",
                        },
                        {
                            role: "PF",
                            action: "NORTH REF - MAG",
                            detail: "Check that TRUE does not appear neither on the HDG/TRK window of the AFS CP, nor on the PFD/ND/ISIS.",
                        },
                        {
                            role: "PF",
                            action: "METER pb - AS RQRD",
                            detail: "",
                        },
                        {
                            role: "PF",
                            action: "FD - ON",
                            detail: "",
                        },
                        {
                            role: "PF",
                            action: "SPD/MACH window - DASHED",
                            detail: "",
                        },
                        {
                            role: "PF",
                            action: "HDG/TRK window - DASHED",
                            detail: "",
                        },
                        {
                            role: "PF",
                            action: "HDG-VS / TRK-FPA pb - HDG-VS",
                            detail: "",
                        },
                        {
                            role: "PF",
                            action: "ALT window - INITIAL EXPECTED CLEARNCE ALTITUDE",
                            detail: "",
                        },
                        {
                            role: "PF",
                            action: "V/S / FPA window - DASHED",
                            detail: "Note: Do not engage the autothrust on ground, as it may generate the AUTO FLT A/THR OFF warning at engine start.",
                        },
                        {
                            role: "PM",
                            action: "AFS CP - CROSSCHECK",
                            detail: "",
                        },
                        {
                            role: "BOTH",
                            action: "LATERAL CONSOLE & PF/PM INSTRUMENT PANELS",
                            isHeader: true,
                        },
                        {
                            role: "BOTH",
                            action: "//warning//",
                            detail: "To prevent hearing damage to the ground crew connected to the intercom system, inform them that a loud noise may be heard in the headset when performing the oxygen mask test.",
                        },
                        {
                            role: "PF-PM",
                            action: "OXYGEN MASK - TEST",
                            detail: "For a detailed test of the mask, Refer to DSC-35-20-40 How to Test the Mask.",
                        },
                        {
                            role: "PF-PM",
                            action: "On the DOOR/OXYGEN SD page: REGUL PR LO indication - CHECK NOT DISPLAYED",
                            detail: "",
                        },
                        {
                            role: "PF-PM",
                            action: "PFD - CHECK",
                            detail: "- Check for the correct display, when ATT and HDG are available\n- Check the airspeed, the FMA, the initial target altitude, the altitude, the vertical speed, the barometric settings, and the heading indications\n- Check that the slats/flaps and the pitch trim displays are available.",
                        },
                        {
                            role: "PF-PM",
                            action: "ND - CHECK",
                            detail: "- Check for the correct display\n- Check the heading, the initial waypoint, and the VOR/ADF indications.",
                        },
                        {
                            role: "BOTH",
                            action: "FUEL ON BOARD",
                            isHeader: true,
                        },
                        {
                            role: "PF-PM",
                            action: "FOB - CHECK",
                            detail: "- On the permanent data of the SD, check that the FOB corresponds to the block fuel of the computerized flight plan\n- On the FMS ACTIVE/FUEL & LOAD page, check extra fuel/time at destination\n- On ECAM FUEL page, check that the fuel is correctly balanced\n- Crosscheck that the sum of the FOB recorded at the end of the last flight and the fuel uplift (if any) is consistent with the current FOB. If an abnormal difference is found, a maintenance action is due.\n\n350-900\nFOB after refueling up to 15 t - Abnormal difference above 900 kg\n\n350-1000\nFOB after refueling up to 15 t - Abnormal difference above 1000 kg\n\nabove 15 t: check FCOM",
                        },
                        {
                            role: "BOTH",
                            action: "DEPARTURE BRIEFING",
                            isHeader: true,
                        },
                        {
                            role: "BOTH",
                            action: "DEPARTURE BRIEFING - PERFORM",
                            detail: "",
                        },
                        {
                            role: "BOTH",
                            action: "COCKPIT PREPARATION C/L",
                            isHeader: true,
                        },
                        {
                            role: "BOTH",
                            action: "COCKPIT PREPARATION C/L - COMPLETE",
                            detail: 'Checklist trigger: Departure briefing completed.\n\nGEAR PINS & COVERS - REMOVED\nThe PF confirms that the gear pins and all covers were checked removed during the walkaround.\nThe PF announces "REMOVED".\n\nFUEL QUANTITY - __ KG\nThe PF checks the FOB and fuel distribution on the FUEL SD page, and compares with the computerized flight plan.\nThe PF announces e.g. "Fifteen thousand three hundred thirty kilograms balanced".\n\nBARO REF - __ (BOTH)\nThe PF and PM check and read the QNH setting (or QFE, if installed).\nThe PF then PM announces e.g. "QNH One Zero One Three".',
                        },
                    ],
                },
                {
                    title: "Before Pushback or Start",
                    items: [
                        {
                            role: "BOTH",
                            action: "BEFORE PUSHBACK/START CLEARANCE",
                            isHeader: true,
                        },
                        {
                            role: "PF-PM",
                            action: "FINAL LOADSHEET - CHECK",
                            detail: "Both flight crewmembers carefully check the final loadsheet, particularly for significant errors.\nMake sure that the loadsheet data is correct (e.g. correct flight number, aircraft, DOW/CG, configuration, FOB).",
                        },
                        {
                            role: "PF-PM",
                            action: "FOB - CHECK",
                            detail: "On the permanent data of the SD, check that the FOB corresponds to the block fuel of the computerized flight plan and to the loadsheet.",
                        },
                        {
                            role: "PF",
                            action: "ZFW/ZFWCG in FMS - CHECK/REVISE",
                            detail: "The PF compares the ZFWIZFWCG of the loadsheet with the ZFW/ZFWCG entered in the ACTIVE/FUEL & LOAD page, and revises them if necessary.\nNOTE: ZFW are rounded up to the nearest hundred.",
                        },
                        {
                            role: "PF",
                            action: "PAX NBR in FMS - CHECK/REVISE",
                            detail: "",
                        },
                        {
                            role: "PM",
                            action: "ZFW/ZFWCG in FMS - CROSSCHECK",
                            detail: "",
                        },
                        {
                            role: "PF-PM",
                            action: "LOADSHEET TOCG AND ECAM GWCG - CROSSCHECK",
                            detail: "Check the loadsheet TOCG vs. the ECAM GWCG:\n- If the difference is less than 1 %, no further action is required. Rely on ECAM GWCG\n- If there is more than 1 % difference, check that the ZFW and the ZFWCG are correctly entered in the FMS, then rely on ECAM GWCG.",
                        },
                        {
                            role: "PF-PM",
                            action: "ECAM GWCG - CHECK WITHIN OPERATIONAL LIMITS",
                            detail: "Check that the Gross Weight CG displayed on the permanent data of the SD is within the CG operational limits.",
                        },
                        {
                            role: "PF",
                            action: "THS FOR __ - CHECK/REVISE",
                            detail: "Check and/or revise the THS setting FOR takeoff. Use the TOCG indicated on the loadsheet as the reference for insertion of the T.O CG in the ACTIVE/PERF page.",
                        },
                        {
                            role: "PM",
                            action: "THS FOR __ - CROSSCHECK",
                            detail: "",
                        },
                        {
                            role: "BOTH",
                            action: "TAKEOFF DATA",
                            detail: "Flight crew must update the takeoff data, and they independently compute again the performance data. After this new double computation, the PF enters the revised takeoff data in the FMS ACTIVE/PERF page. For OIS FINAL TAKEOFF PERF DATA re-computation uses the sum of TOW+TAXI which indicates on the ACTIVE/FUEL&LOAD page.",
                        },
                        {
                            role: "BOTH",
                            action: "If takeoff conditions changed:",
                            detail: "",
                        },
                        {
                            role: "PF-PM",
                            action: "> FINAL T.O PERF DATA - RECOMPUTE",
                            detail: "The PF and the PM independently compute again the takeoff performance data.",
                        },
                        {
                            role: "PF",
                            action: "> FMS T.O DATA - REVISE",
                            detail: "The PF revises the takeoff data in the FMS. If the flight crew uses the optimum configuration option for the computation, they should pay specific attention to changes to the configuration of the slats/flaps at takeoff.",
                        },
                        {
                            role: "PM",
                            action: "FINAL T.O PERF DATA - CROSSCHECK",
                            detail: "The PM compares the T.O panel of the FMS ACTIVE/PERF page with the EFB takeoff performance application. The Flysmart has the function of XCHECK WITH AVNCS which enables the flight crew to automatically check takeoff performance data.",
                        },
                        {
                            role: "PF-PM",
                            action: "SEATING POSITION - ADJUST",
                            detail: "TBA",
                        },
                        {
                            role: "PF-PM",
                            action: "HUD - DEPLOY/ADJUST",
                            detail: "",
                        },
                        {
                            role: "PM",
                            action: "AIR CONDITIONING UNITS - CHECK DISCONNECTED",
                            detail: "",
                        },
                        {
                            role: "PM",
                            action: "EXT pb - CHECK AVAIL",
                            detail: "",
                        },
                        {
                            role: "PM",
                            action: "EXT PWR DISCONNECTION - REQUEST",
                            detail: "",
                        },
                        {
                            role: "BOTH",
                            action: "AT PUSHBACK/START CLEARANCE",
                            isHeader: true,
                        },
                        {
                            role: "PM",
                            action: "PUSHBACK/START CLEARANCE - OBTAIN",
                            detail: "",
                        },
                        {
                            role: "PF",
                            action: "BEACON sw - ON",
                            detail: "",
                        },
                        {
                            role: "PF-PM",
                            action: "TAXI VIDEO - AS RQRD",
                            detail: "",
                        },
                        {
                            role: "PF-PM",
                            action: "DOORS & SLIDES - CHECK CLOSED/ARMED",
                            detail: "",
                        },
                        {
                            role: "PF-PM",
                            action: "SURV DEFAULT SETTINGS - SELECT",
                            detail: "",
                        },
                        {
                            role: "PF",
                            action: "THRUST LEVERS - IDLE",
                            detail: "",
                        },
                        {
                            role: "PF",
                            action: "ACCU PRESS - CHECK",
                            detail: "",
                        },
                        {
                            role: "BOTH",
                            action: "If pushback is not required:",
                            detail: "",
                        },
                        {
                            role: "PF",
                            action: "> PARK BRK handle - ON",
                            detail: "",
                        },
                        {
                            role: "PF",
                            action: "> PARK BRK indication - CHECK DISPLAYED",
                            detail: "",
                        },
                        {
                            role: "BOTH",
                            action: "> BEFORE START C/L - COMPLETE",
                            detail: '//TBA//Checklist trigger: Departure briefing completed.\n\nGEAR PINS & COVERS - REMOVED\nThe PF confirms that the gear pins and all covers were checked removed during the walkaround.\nThe PF announces "REMOVED".\n\nFUEL QUANTITY - __ KG\nThe PF checks the FOB and fuel distribution on the FUEL SD page, and compares with the computerized flight plan.\nThe PF announces e.g. "Fifteen thousand three hundred thirty kilograms balanced".\n\nBARO REF - __ (BOTH)\nThe PF and PM check and read the QNH setting (or QFE, if installed).\nThe PF then PM announces e.g. "QNH One Zero One Three".',
                        },
                        {
                            role: "BOTH",
                            action: "If pushback is required:",
                            detail: "",
                        },
                        {
                            role: "PF",
                            action: "> N/W STEER DISC MEMO - CHECK DISPLAYED",
                            detail: "",
                        },
                        {
                            role: "BOTH",
                            action: "> BEFORE START C/L - COMPLETE",
                            detail: '//TBA//Checklist trigger: Departure briefing completed.\n\nGEAR PINS & COVERS - REMOVED\nThe PF confirms that the gear pins and all covers were checked removed during the walkaround.\nThe PF announces "REMOVED".\n\nFUEL QUANTITY - __ KG\nThe PF checks the FOB and fuel distribution on the FUEL SD page, and compares with the computerized flight plan.\nThe PF announces e.g. "Fifteen thousand three hundred thirty kilograms balanced".\n\nBARO REF - __ (BOTH)\nThe PF and PM check and read the QNH setting (or QFE, if installed).\nThe PF then PM announces e.g. "QNH One Zero One Three".',
                        },
                        {
                            role: "PF",
                            action: "> PARK BRK handle - OFF",
                            detail: "",
                        },
                        {
                            role: "PF",
                            action: "> When pushback is completed:",
                            detail: "",
                        },
                        {
                            role: "PF",
                            action: ">> PARK BRK handle - ON",
                            detail: "",
                        },
                        {
                            role: "PF",
                            action: ">> PARK BRK indication - CHECK DISPLAYED",
                            detail: "",
                        },
                    ],
                },
                {
                    title: "Engine Start",
                    items: [
                        {
                            role: "PF",
                            action: "THRUST LEVERS - IDLE",
                            detail: "",
                        },
                        {
                            role: "PF",
                            action: "ENG START selector - IGN START",
                            detail: "",
                        },
                        {
                            role: "PF",
                            action: "ENGINE 1 START - ANNOUNCE",
                            detail: "",
                        },
                        {
                            role: "PF",
                            action: "ENG 1 MASTER lever - ON",
                            detail: "",
                        },
                        {
                            role: "PF",
                            action: "ENG IDLE PARAMETERS - CHECK",
                            detail: "",
                        },
                        {
                            role: "PF",
                            action: "In the case of all engines taxi at departure: REPEAT THE START SEQUENCE FOR ENG 2",
                            detail: "",
                        },
                    ],
                },
                {
                    title: "After Start (All Engines Taxi at Departure)",
                    items: [
                        {
                            role: "PF",
                            action: "ENG START selector - NORM",
                            detail: "",
                        },
                        {
                            role: "PF",
                            action: "ELM pb-sw - ON",
                            detail: "",
                        },
                        {
                            role: "PF",
                            action: "APU BLEED pb-sw - OFF",
                            detail: "",
                        },
                        {
                            role: "PM",
                            action: "GND SPLRS - ARM",
                            detail: "",
                        },
                        {
                            role: "PF",
                            action: "ENG 1 and 2 ANTI ICE pb-sw - AS RQRD",
                            detail: "",
                        },
                        {
                            role: "PM",
                            action: "RUDDER TRIM - CHECK NEUTRAL",
                            detail: "",
                        },
                        {
                            role: "PF",
                            action: "WING ANTI ICE pb-sw - AS RQRD",
                            detail: "",
                        },
                        {
                            role: "PM",
                            action: "FLAPS - SET",
                            detail: "",
                        },
                        {
                            role: "PF",
                            action: "If the APU is not required: APU MASTER SW pb-sw - OFF",
                            detail: "",
                        },
                        {
                            role: "PM",
                            action: "PITCH TRIM - CHECK",
                            detail: "",
                        },
                        {
                            role: "BOTH",
                            action: "ECAM STATUS - CHECK",
                            detail: "",
                        },
                        {
                            role: "PF",
                            action: "N/W STEER DISC MEMO - CHECK NOT DISPLAYED",
                            detail: "",
                        },
                        {
                            role: "PF",
                            action: "THRUST SETTING - CROSSCHECK",
                            detail: "",
                        },
                        {
                            role: "PF",
                            action: "CLEAR TO DISCONNECT - ANNOUNCE",
                            detail: "",
                        },
                        {
                            role: "BOTH",
                            action: "AFTER START C/L - COMPLETE",
                            detail: '//TBA//Checklist trigger: Departure briefing completed.\n\nGEAR PINS & COVERS - REMOVED\nThe PF confirms that the gear pins and all covers were checked removed during the walkaround.\nThe PF announces "REMOVED".\n\nFUEL QUANTITY - __ KG\nThe PF checks the FOB and fuel distribution on the FUEL SD page, and compares with the computerized flight plan.\nThe PF announces e.g. "Fifteen thousand three hundred thirty kilograms balanced".\n\nBARO REF - __ (BOTH)\nThe PF and PM check and read the QNH setting (or QFE, if installed).\nThe PF then PM announces e.g. "QNH One Zero One Three".',
                        },
                    ],
                },
                {
                    title: "All Engines Taxi at Departure",
                    items: [
                        {
                            role: "PM",
                            action: "TAXI CLEARANCE - OBTAIN",
                            detail: "",
                        },
                    ],
                },
                {
                    title: "Departure Change",
                    items: [],
                },
                {
                    title: "Before Takeoff",
                    items: [],
                },
                {
                    title: "Takeoff",
                    items: [],
                },
                {
                    title: "After Takeoff",
                    items: [],
                },
                {
                    title: "Climb",
                    items: [],
                },
                {
                    title: "Cruise",
                    items: [],
                },
                {
                    title: "Descent Preparation",
                    items: [],
                },
                {
                    title: "Descent",
                    items: [],
                },
                {
                    title: "Approach",
                    items: [],
                },
                {
                    title: "Manual Landing",
                    items: [],
                },
                {
                    title: "Automatic Landing",
                    items: [],
                },
                {
                    title: "Go Around",
                    items: [],
                },
                {
                    title: "After Landing",
                    items: [],
                },
                {
                    title: "Parking",
                    items: [],
                },
                {
                    title: "Cockpit Postflight Security Check",
                    items: [],
                },
                {
                    title: "Securing the Aircraft",
                    items: [],
                },
            ];

            // --- STATE MANAGEMENT ---
            const container = document.getElementById("checklist-container");
            const masterBtn = document.getElementById("masterToggleBtn");
            let selectedRoles = new Set(["ALL"]);
            let isMasterExpanded = false; // Tracks global state

            // --- RENDERING ---
            function renderChecklist() {
                container.innerHTML = "";
                let hasVisibleActions = false;

                sopData.forEach((section, sIndex) => {
                    const sectionEl = document.createElement("div");
                    sectionEl.className = "section";

                    const header = document.createElement("div");
                    header.className = "section-header";
                    header.textContent = section.title;
                    sectionEl.appendChild(header);

                    let visibleItemsCount = 0;
                    const itemsContainer = document.createElement("div");

                    section.items.forEach((item, iIndex) => {
                        const itemRoles = item.role.split(/[-/]/);
                        let isVisible = false;

                        if (selectedRoles.has("ALL")) isVisible = true;
                        else if (item.role === "BOTH" || item.role === "ALL")
                            isVisible = true;
                        else if (itemRoles.some((r) => selectedRoles.has(r)))
                            isVisible = true;

                        if (isVisible) {
                            visibleItemsCount++;
                            const itemEl = document.createElement("div");
                            itemEl.className = "item-group";

                            // Unique ID for toggling
                            const itemId = `item-${sIndex}-${iIndex}`;

                            let html = `<div class="item" id="${itemId}">`;

                            if (item.isHeader) {
                                html += `<div style="font-weight:bold; color:var(--accent-color); border-bottom:1px solid #ddd; padding-bottom:5px; margin-bottom:5px;">${item.action}</div>`;
                            } else {
                                // html += `<span class="item-role-badge role-${item.role}">${item.role}</span>`;

                                // // Action Row (Title + Toggle Button)
                                // html += `<div class="action-row">`;
                                // html += `<div class="action-title">${item.action}</div>`;
                                // New In-Line Header Row
                                html += `<div class="action-header">`;

                                // 1. Badge
                                html += `<span class="item-role-badge role-${item.role}">${item.role}</span>`;

                                // 2. Title (now directly next to badge)
                                html += `<div class="action-title">${item.action}</div>`;

                                // Only show toggle button if details exist
                                if (item.detail && item.detail.trim() !== "") {
                                    html += `<button class="toggle-btn" onclick="toggleSingleDetail('${itemId}')">▼</button>`;
                                }
                                html += `</div>`; // End action-row

                                // Detail Section (Hidden by default via CSS)
                                if (item.detail && item.detail.trim() !== "") {
                                    html += `<div class="action-detail-container">
                                                        <div class="action-detail">${item.detail}</div>
                                                     </div>`;
                                }
                            }
                            html += `</div>`; // End item

                            itemEl.innerHTML = html;
                            itemsContainer.appendChild(itemEl);
                        }
                    });

                    if (visibleItemsCount === 0) {
                        const emptyMsg = document.createElement("div");
                        emptyMsg.className = "empty-section-message";
                        emptyMsg.textContent =
                            "No actions for selected roles in this phase.";
                        emptyMsg.style.display = "block";
                        sectionEl.appendChild(emptyMsg);
                    } else {
                        sectionEl.appendChild(itemsContainer);
                    }

                    if (visibleItemsCount > 0) {
                        container.appendChild(sectionEl);
                        hasVisibleActions = true;
                    }
                });

                // Re-apply master state if it was expanded
                if (isMasterExpanded) {
                    expandAllDOM();
                }
            }

            // --- INTERACTIONS ---

            function toggleRole(role) {
                if (role === "ALL") {
                    selectedRoles.clear();
                    selectedRoles.add("ALL");
                } else {
                    if (selectedRoles.has("ALL")) selectedRoles.clear();
                    if (selectedRoles.has(role)) selectedRoles.delete(role);
                    else selectedRoles.add(role);
                    if (selectedRoles.size === 0) selectedRoles.add("ALL");
                }
                updateButtonStyles();
                renderChecklist();
            }

            function updateButtonStyles() {
                document.querySelectorAll(".role-btn").forEach((btn) => {
                    // Skip the master toggle button from role logic
                    if (btn.id === "masterToggleBtn") return;

                    const btnRole = btn.getAttribute("data-role");
                    if (selectedRoles.has(btnRole)) btn.classList.add("active");
                    else btn.classList.remove("active");
                });
            }

            // Toggle a single item
            function toggleSingleDetail(itemId) {
                const itemEl = document.getElementById(itemId);
                if (itemEl) {
                    itemEl.classList.toggle("expanded");
                }
            }

            // Master Toggle Logic
            function toggleAllDetails() {
                isMasterExpanded = !isMasterExpanded;

                if (isMasterExpanded) {
                    expandAllDOM();
                    masterBtn.textContent = "COLLAPSE ALL DETAILS";
                } else {
                    collapseAllDOM();
                    masterBtn.textContent = "EXPAND ALL DETAILS";
                }
            }

            function expandAllDOM() {
                const items = document.querySelectorAll(".item");
                items.forEach((el) => el.classList.add("expanded"));
            }

            function collapseAllDOM() {
                const items = document.querySelectorAll(".item");
                items.forEach((el) => el.classList.remove("expanded"));
            }

            // Initial Render
            renderChecklist();
        </script>
    </body>
</html>
